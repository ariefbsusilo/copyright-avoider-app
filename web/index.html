<!DOCTYPE html>
<html>

<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="description" content="Copyright Avoider App - Educational Purpose">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Copyright Avoider">
    <title>Copyright Avoider - Learning App</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        #loading-container {
            text-align: center;
            color: white;
        }

        .loader {
            width: 80px;
            height: 80px;
            margin: 0 auto 30px;
            border: 8px solid rgba(255, 255, 255, 0.3);
            border-top: 8px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            animation: pulse 1.5s ease-in-out infinite;
        }

        .loading-subtext {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 10px;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .dots {
            display: inline-block;
            width: 20px;
        }

        .dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: white;
            margin: 0 2px;
            animation: dotPulse 1.4s infinite ease-in-out;
        }

        .dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes dotPulse {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1);
            }
        }

        #app-content {
            display: none;
        }

        #app-content.loaded {
            display: block;
        }
    </style>
</head>

<body>
    <div id="loading-container">
        <div class="loader"></div>
        <div class="loading-text">
            Copyright Avoider App
        </div>
        <div class="loading-subtext">
            Loading
            <span class="dots">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </span>
        </div>
        <div class="loading-subtext" style="margin-top: 20px; font-size: 12px;">
            ⚠️ Untuk Tujuan Edukasi
        </div>
    </div>

    <div id="app-content"></div>

    <script>
        // Show loading progress with timer
        let loadingSubtext = document.querySelector('.loading-subtext');
        let startTime = Date.now();
        let progressInterval = setInterval(function () {
            let elapsed = Math.floor((Date.now() - startTime) / 1000);
            if (elapsed > 3) {
                loadingSubtext.innerHTML = 'Loading<span class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span><br><small style="font-size: 11px; opacity: 0.7;">First load takes ~5-10 seconds...</small>';
            }
            if (elapsed > 10) {
                clearInterval(progressInterval);
            }
        }, 2000);

        window.addEventListener('load', function (ev) {
            // Load Flutter with defer strategy
            _flutter.loader.load({
                onEntrypointLoaded: async function (engineInitializer) {
                    // Update loading text
                    loadingSubtext.innerHTML = 'Starting app<span class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>';

                    // Initialize and run
                    let appRunner = await engineInitializer.initializeEngine({
                        hostElement: document.getElementById('app-content')
                    });
                    await appRunner.runApp();

                    // Clear interval
                    clearInterval(progressInterval);

                    // Hide loading with fade out
                    setTimeout(function () {
                        document.getElementById('loading-container').style.transition = 'opacity 0.5s';
                        document.getElementById('loading-container').style.opacity = '0';

                        setTimeout(function () {
                            document.getElementById('loading-container').style.display = 'none';
                            document.getElementById('app-content').style.display = 'block';
                            document.body.style.background = 'white';
                        }, 500);
                    }, 300);
                }
            });
        });
    </script>
    <script src="flutter.js" defer></script>
</body>

</html>